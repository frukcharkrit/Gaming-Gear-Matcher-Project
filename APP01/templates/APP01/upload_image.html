{% extends 'APP01/base.html' %}

{% block title %}Upload Image - GamingGearMatcher{% endblock %}

{% block content %}
<div class="row justify-content-center">
	<div class="col-md-6">
		<div class="card shadow-sm">
			<div class="card-body">
				<h3 class="card-title mb-3">Upload Your Image</h3>
				<p class="text-muted small">อัปโหลดภาพเต็มตัวให้ชัด เพื่อการแมตช์ที่แม่นยำขึ้น</p>
				<form method="post" action="{% url 'upload_image' %}" enctype="multipart/form-data">
					{% csrf_token %}
					<div class="mb-3">
						<input class="form-control" type="file" name="image" id="imageInput" accept="image/*" required>
					</div>
					<div class="mb-3 text-center">
						<img id="preview" src="" alt="Image preview" class="img-fluid" style="max-height:300px; display:none;"/>
					</div>
					<div class="d-flex justify-content-between">
						<a href="{% url 'home_guest' %}" class="btn btn-outline-secondary">Cancel</a>
						<button class="btn btn-primary" type="submit">Upload & Match</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script>
document.getElementById('imageInput').addEventListener('change', function(evt){
	const file = evt.target.files[0];
	const preview = document.getElementById('preview');
	if(!file){ preview.style.display='none'; preview.src=''; return; }
	const reader = new FileReader();
	reader.onload = function(e){
		preview.src = e.target.result;
		preview.style.display = 'block';
	}
	reader.readAsDataURL(file);
});
</script>

{% endblock %}

